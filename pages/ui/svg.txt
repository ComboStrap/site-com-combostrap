---json
{
    "canonical":"svg",
    "title":"Native Svg support",
    "description":"ComboStap supports natively SVG"
}
---
====== ComboStrap UI - SVG ======


===== About =====
''Svg'' are supported natively as [[image|image]]


They are by default [[#optimization|optimized]]

If they have:
  * a small size, they are [[#inclusion|included]] directly to the web page
  * a big size, they are:
      * [[#lazy loading|lazy loaded]]
      * and [[#injection|injected]] as markup


<note>
This features apply also to the [[icon|icon component]]
</note>


===== Example =====


<webcode name="Default" frameborder="0">
<code dw>
{{ :combostrap:background:object-multicolor.svg?400 |}}
</code>
</webcode>



===== Features =====

==== Inclusion =====
If the SVG file has a size that is less or equal to the [[#svgMaxInlineSize]] configuration, the SVG is directly included into the HTML document as markup
Otherwise, it is added as a image.

This is a tradeoff configuration between the size of your web page and the cost of downloading your SVG file.



==== Lazy Loading ====
By default all big SVG file are lazy loaded meaning that they are downloaded only when they are going to be seen (enter into the screen).

If you don't want this feature, you can disable it in the [[#configuration|configuration]].

==== Injection ====
Big SVG file are downloaded and then injected as SVG markup. It's then possible to style them with CSS property.



If you don't want this feature, you can disable it in the [[#configuration|configuration]].

==== Optimization ====
Svg Optimization is the reduction of the file size by deleting unneeded information in the returned SVG.

We are following a subset of the  [[https://github.com/svg/svgo#built-in-plugins|SvgO]] optimization rules:
  * Remove XML header
<code xml>
'<?xml version="1.0" encoding="UTF-8"?>
</code>
  * Remove doctype ie 
<code xml>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
</code>
  * Remove comments
  * Eemove metadata
  * clean ID's
  * Remove empty elements
  * Remove editors and empty namespace
  * Remove title
  * Remove desc
  * Remove Style element
  * Remove Script element
  * Remove Attribute with default value (for instance ''%%version="1.1"%%'' or ''%%preserveAspectRatio="xMidYMid meet"%%''
  * Remove width and height if they have the same value than the viewBox



You can disable and/or tune the optimizations with the help of the [[#svgOptimizationEnable|svg optimization configurations]].

<note>
If you want to see the effect or optimized manually your SVG, you can go to the [[https://jakearchibald.github.io/svgomg/|SVGOMG tool]].

\\

{{ :ui:svgomg.png?300 |}}
</note>


==== Upload permission ====

By default, the svg files cannot be uploaded because they can contain code. Only the ''admin'' user can upload a SVG.

If you want to allow users to upload, you need to:
  * set the group that is allowed to upload a SVG in the [[#svgUploadGroupName|svgUploadGroupName]] configuration.
  * add the user to this group.

===== Configuration =====

==== svgMaxInlineSize ====
The ''svgMaxInlineSize'' [[:configuration|configuration]] is the maximum file size until a SVG file is included directly in the web page.

With a default of ''2Kb'', all small SVG file such as [[ui:icon|icon]] are automatically included. The browser does not need to download them.

==== svgOptimizationEnable ====
By default, the [[#optimization]] are enabled. This configuration permits to disable this feature.

The below configuration permits to control how the optimization is peformed.
=== svgOptimizationNamespacesToKeep ===
This configuration set the namespace ''prefix''  (not the http URI but the name) that should be kept separated by a comma.

By default, the optimization will delete all below editors and empty namespace.

The editors namespace automatically deleted are:
<file>
http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd
http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd
http://www.inkscape.org/namespaces/inkscape
http://www.bohemiancoding.com/sketch/ns
http://ns.adobe.com/AdobeIllustrator/10.0/
http://ns.adobe.com/Graphs/1.0/
http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/
http://ns.adobe.com/Variables/1.0/
http://ns.adobe.com/SaveForWeb/1.0/
http://ns.adobe.com/Extensibility/1.0/
http://ns.adobe.com/Flows/1.0/
http://ns.adobe.com/ImageReplacement/1.0/
http://ns.adobe.com/GenericCustomNamespace/1.0/
http://ns.adobe.com/XPath/1.0/
http://schemas.microsoft.com/visio/2003/SVGExtensions/
http://taptrix.com/vectorillustrator/svg_extensions
http://www.figma.com/figma/ns
http://purl.org/dc/elements/1.1/
http://creativecommons.org/ns#
http://www.w3.org/1999/02/22-rdf-syntax-ns#
http://www.serif.com/
http://www.vector.evaxdesign.sk
</file>

=== svgOptimizationAttributesToDelete ===
The attributes to delete on all nodes.

By default, we are deleting the ''id'' and ''style'' attributes.


=== svgOptimizationElementsToDelete ===
The elements to delete on the whole SVG.

By default, we delete the following elements:
  * [[https://developer.mozilla.org/en-US/docs/Web/SVG/Element/script|script]] (No script can be injected via ''SVG'')
  * [[https://developer.mozilla.org/en-US/docs/Web/SVG/Element/title|title]]
  * [[https://developer.mozilla.org/en-US/docs/Web/SVG/Element/desc|desc]]





==== svgLazyLoadEnable ====
By default, the SVG files that have a size bigger than the [[#svgmaxinlinesize|maximum inline size]] are [[#lazy Loading|lazy loaded]]. 

This configuration permits to disable this feature.


==== svgInjectionEnable ====
By default, the SVG files that have a size bigger than the [[#svgmaxinlinesize|maximum inline size]] are [[#injection|injected]]. 

This configuration permits to disable this feature.
==== svgUploadGroupName ====
This [[:configuration|configuration]] sets the group that is allowed to upload a SVG file.

SVG file can contain code and this by default not allowed to upload a SVG.

==== svgPreserveAspectRatioDefault ====
If the [[https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio|preserveAspectRatio]] attribute is not set, it will be set with the default value.

This parameter drives how the SVG will fit in its container when the screen (viewport) is resizing.

The default value at installation time is: ''xMidYMid slice'' which means that:
  * the svg image will be in the middle of X and Y
  * and will be cropped.

Other options with the [[https://www.w3.org/TR/SVG11/coords.html#PreserveAspectRatioAttribute|Svg Reference]] or at [[https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio|the mozilla knowledge base]]

{{ :ui:preserveaspectratio.svg?320 |}}

